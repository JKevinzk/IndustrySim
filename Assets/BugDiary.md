#  BugDiary

## 2022.9.13

### 11：00
在DragObject中修复了会同时显示两个物体包围盒的bug
依旧存在点击物体时即会移动的问题。应该是直接将鼠标坐标赋值给轴心的缘故。目前解决思路是借鉴y轴移动的方法，采取插值。

### 14：05
查询B站网址 
www.bilibili.com/video/BV1L44y1N7Le?spm_id_from=333.337.search-card.all.click&vd_source=2efbd161cd56ca93e392d85d912f86f8   
思路为：在按下鼠标时，用变量`distance`保存物体和鼠标的位置差，更新位置时，将物体`position`赋值为`鼠标坐标 + distance`

## 2022.9.16
拖拽物体的原理，获取鼠标的坐标，并对齐到最近的网格，获取网格的坐标，再把网格坐标转化成三维空间坐标，赋值给物体

### 10：48
~~在进行y轴坐标移动时，如果右击菜单面板和物体重合，点击y轴移动时，会水平移动物体。射线探测会穿透右击菜单面板。~~

## 2022.9.19
### 10:39
【bug】
1. ~~在加载场景的时候，只能保存物体的位置信息，无法保存物体旋转信息~~
2. 上下碰撞检测受拖拽速度影响，精度不高，导致y轴调整无法对齐
3. 物体尺寸精度不高，有细微误差
4. ~~加载场景后，删除物体，bound包围盒脚本会报错。（暂时猜测是销毁物体时的错误）~~

### 11:48
修复无法保存物体旋转信息的bug


## 2022.9.20
鼠标滚轮滚动会影响组件面板的上下滚动，需要区分

### 10:22
删除物体，包围盒报错，只针对于楼梯扶手组件

## 2022.9.24
楼梯扶手删除报错解决。解决方案：重新建模  
单独计算了预先的网格偏差，缩小了点击物体移动的偏差

### 13：55
保存后加载，拖拽无法在保存的水平面上移动
保存UI面板，会和射线探测移动物体冲突

## 2022.10.08
### 11：23
【BUG】鼠标移动物体时，无法及时响应，需要点击右击，才能左击选中，怀疑是与取消选中状态的逻辑有关

### 14:06
~~【bug】物体在传送带上移动时，只能向一个固定方向移动。之后在旋转传送带时，更改传送方向即可。~~

## 2022.10.09
【bug】传送带与传送带之间碰撞，也会移动。加个判断item物体就行

## 2022.10.10
单例模式，使用单例方法，一定要用xxx.Instance.xxx

## 2022.10.28
【bug】码垛机大小不对，无法显示包围盒

## 2022.11.7
【优化】物体添加对应组件应该写在ComponentFactory里面，不用手动添加

## 2022.11.9
【优化】优化渲染管线URP
【优化】网格贴图、模型抗锯齿
【优化】模型精度，包围盒与网格对齐

## 2022.11.29
【bug】增加物体时，有些物体名称会因为末尾不带（clone）而在名称上出错，初步猜测名称过长而没有clone，解决：可以用正则判断

## 2022.12.15
目前对于信号绑定的想法是：
设置signalManager信号映射管理器
1. 将组件的id与对应的所在位的位数的映射关系保存下来
2. 将PLC通信的数据接收下来，保存里面的数据（就是所有组件的信号值）
添加组件的时候设置组件的唯一id，采取递增的形式
在每类组件的运动逻辑代码下，在update里，根据本组件的组件信息查询到id，再查询其位数，再查询其运动状态。根据运动逻辑对其进行更新。

码垛机场景下，只需要16个输入信号，共2字节，一个寄存器存储即可